(function(){"use strict";var t={4779:function(t,e,a){var s=a(2083),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],r=a(1001),o={},l=(0,r.Z)(o,i,n,!1,null,null,null),d=l.exports,c=a(3625),u=function(){var t=this,e=t._self._c;return e("el-container",[e("el-header",[t._v(" tiktok ")]),e("el-container",[e("el-main",[e("add-link-card"),e("live-view")],1)],1)],1)},m=[],p=(a(7658),function(){var t=this,e=t._self._c;return e("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:t.dynamicValidateForm,"label-width":"200px"}},[t._l(t.dynamicValidateForm.domains,(function(a,s){return e("el-form-item",{key:a.key,attrs:{label:"直播间id"+(s+1),prop:"domains."+s+".value",rules:{required:!0,message:"直播间",trigger:"blur"}}},[e("el-row",{staticStyle:{margin:"0px"},attrs:{gutter:10}},[e("el-col",{attrs:{span:4}},[e("el-input",{model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"domain.value"}})],1),e("el-col",{attrs:{span:8}},[e("el-input",{attrs:{placeholder:"备注"},model:{value:a.country,callback:function(e){t.$set(a,"country",e)},expression:"domain.country"}})],1),e("el-col",{attrs:{span:3}},[e("el-button",{on:{click:function(e){return e.preventDefault(),t.removeDomain(a)}}},[t._v("删除")])],1),e("el-col",{attrs:{span:1}},[e("el-button",{on:{click:function(t){a.value=""}}},[t._v("重置")])],1)],1)],1)})),e("el-form-item",[e("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.dynamicValidateForm.domains.length,expression:"dynamicValidateForm.domains.length!==0"}],attrs:{type:"primary"},on:{click:function(e){return t.submitForm("dynamicValidateForm")}}},[t._v("提交 ")]),e("el-button",{on:{click:t.addDomain}},[t._v("新增直播间")])],1)],2)}),v=[],f={name:"AddLinkCard",data(){return{dynamicValidateForm:{domains:[]},prop:["getLive"]}},methods:{submitForm(t){this.$refs[t].validate((t=>{if(!t)return console.log("error submit!!"),!1;this.dynamicValidateForm.domains.forEach((t=>{this.add(t)}))}))},async add(t){let e={liveId:t.value,remark:t.country};await this.$axios.post("/api/live/add",JSON.stringify(e)).then((e=>{"1"===String(e.data.code)?(this.removeDomain(t),this.$message.success(e.data.msg),this.$emit("updateLive")):this.$message.error(e.data.msg)})).catch((t=>{alert(t)}))},removeDomain(t){var e=this.dynamicValidateForm.domains.indexOf(t);-1!==e&&this.dynamicValidateForm.domains.splice(e,1)},addDomain(){this.dynamicValidateForm.domains.push({value:"",country:""})}}},h=f,g=(0,r.Z)(h,p,v,!1,null,"0c865a3a",null),y=g.exports,b=function(){var t=this,e=t._self._c;return e("el-card",[e("el-card",{staticStyle:{width:"90%",margin:"10px auto",padding:"0","text-align":"center"}},[e("AddLinkCard",{on:{updateLive:t.getLive}})],1),e("el-card",{staticStyle:{width:"90%",margin:"0 auto"}},[[e("el-table",{staticStyle:{"text-align":"center",margin:"0 auto"},attrs:{data:t.tableData,border:"","row-class-name":t.tableRowClassName}},[e("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),e("el-table-column",{attrs:{prop:"liveId",label:"直播间id",width:"120"}}),e("el-table-column",{attrs:{prop:"remark",label:"备注",width:"205"}}),e("el-table-column",{attrs:{prop:"status_c",label:"状态",width:"65"}}),e("el-table-column",{attrs:{prop:"device",label:"设备码",width:"265"}}),e("el-table-column",{attrs:{label:"重置设备码",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.stop(a.$index,t.tableData)}}},[t._v(" 重置 ")])]}}])}),e("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{directives:[{name:"show",rawName:"v-show",value:1,expression:"1 "}],attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.edit(a.$index,t.tableData)}}},[t._v(" 修改 ")])]}}])}),e("el-table-column",{attrs:{label:"删除",width:"60"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRow(a.$index,t.tableData)}}},[t._v(" 移除 ")])]}}])})],1)]],2)],1)},w=[],x={name:"LiveView",data(){return{tableData:[]}},components:{},beforeMount(){this.getLive(),setInterval((()=>{this.getLive()}),2e3)},methods:{tableRowClassName({rowIndex:t}){let e=this.tableData[t];return"1"!==e["status"]?(e["status_c"]="已启用","success-row"):(e["status_c"]="已关闭","")},async edit(t,e){let a={id:this.tableData[t].id};await this.$axios.post("/api/live/change",JSON.stringify(a)).then((t=>{"1"===String(t.data.code)?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})).catch((t=>{this.$message.error(t)})),e.splice(t,1)},async deleteRow(t,e){let a={id:this.tableData[t].id};await this.$axios.post("/api/live/delete",JSON.stringify(a)).then((t=>{"1"===String(t.data.code)?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})).catch((t=>{this.$message.error(t)})),e.splice(t,1)},async stop(t,e){let a={id:this.tableData[t].id};await this.$axios.post("/api/live/reset",JSON.stringify(a)).then((t=>{"1"===String(t.data.code)?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})).catch((t=>{this.$message.error(t)})),e.splice(t,1)},async getLive(){await this.$axios.get("/api/live/list").then((t=>{"1"===String(t.data.code)&&(this.tableData=t.data.data||[])})).catch((t=>{this.$message.error(t)}))}}},_=x,$=(0,r.Z)(_,b,w,!1,null,null,null),C=$.exports,k={name:"IndexSystem",data(){return{}},components:{LiveView:C,AddLinkCard:y},beforeCreate(){this.$axios.get("/api/live/list").then((t=>{"0"===String(t.data.code)&&"未登录"===t.data.msg&&(this.$router.push({name:"index"}),this.$message.error("未登录"))})).catch((t=>{this.$message.error(t)}))},methods:{}},S=k,O=(0,r.Z)(S,u,m,!1,null,"7f749652",null),P=O.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("div",{staticClass:"bigBox"},[e("div",{staticClass:"center-box"},[e("div",{staticClass:"left"}),e("div",{staticClass:"box"},[e("h1",[t._v("Login")]),e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user,expression:"form.user"}],attrs:{type:"text",name:"username",id:"",required:"required"},domProps:{value:t.form.user},on:{input:function(e){e.target.composing||t.$set(t.form,"user",e.target.value)}}}),e("span",{staticClass:"placeholder"},[t._v("user name")]),e("div",{staticClass:"error-placeholder",style:t.status.name},[e("span",[t._v("账号不存在")]),e("div",{staticClass:"line"})])]),e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",name:"username",id:"",required:"required"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),e("span",{staticClass:"placeholder"},[t._v("password")]),e("div",{staticClass:"error-placeholder",style:t.status.password},[e("span",[t._v("密码错误!")]),e("div",{staticClass:"line"})])]),t._m(0),e("div",{staticClass:"btn",style:t.status.loginWait,on:{click:t.login}},[e("span",[t._v("Login")])]),e("div",{staticClass:"loader",style:"visibility:hidden"===t.status.loginWait?"":"visibility:hidden"})])])])])},L=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"s",staticStyle:{display:"none"}},[e("label",{staticClass:"label-check"},[e("input",{attrs:{type:"checkbox",id:"remember"}}),e("span",{staticClass:"checkbox"})]),e("label",{staticClass:"text",attrs:{for:"remember"}},[t._v("十天内免登录")])])}],V={name:"LoginSystem",data(){return{form:{user:"",password:""},status:{name:"visibility:hidden",password:"visibility:hidden",loginWait:""}}},mounted(){this.mouseEvent()},methods:{login(){let t={userId:this.form.user,password:this.form.password};this.$axios.post("/api/manager/login",JSON.stringify(t)).then((t=>{"1"===String(t.data.code)&&(this.$router.push({name:"live"}),this.$message.success("登录成功"))})).catch((t=>{this.$message.error(t)}))},mouseEvent(){for(let e=0;e<14;e++)console.log(e);let t=document.querySelector(".btn");t.addEventListener("mouseenter",(e=>{for(let t=0;t<14;t++)console.log(t);""===t.style.getPropertyValue("--xPos")&&(t.style.setProperty("--xPos",e.clientX-t.getBoundingClientRect().x+"px"),e.clientY-t.getBoundingClientRect().top<20?t.style.setProperty("--yPos",e.clientY-t.getBoundingClientRect().top-20+"px"):t.style.setProperty("--yPos",e.clientY-t.getBoundingClientRect().top+20+"px"))})),t.addEventListener("mouseleave",(()=>{setTimeout((function(){""!==t.style.getPropertyValue("--xPos")&&(t.style.setProperty("--xPos",""),t.style.setProperty("--yPos",""))}),300)}))}}},F=V,N=(0,r.Z)(F,D,L,!1,null,"bce5b1ba",null),j=N.exports;s["default"].use(c.ZP);const R=[{path:"/",name:"index",component:j},{path:"/live",name:"live",component:P}],T=new c.ZP({routes:R});var Z=T,B=a(1960),q=a.n(B),E=a(4643);s["default"].config.productionTip=!1,s["default"].use(q()),s["default"].prototype.$axios=E.Z,s["default"].prototype.$axios.defaults.headers["Content-Type"]="application/json;charset=utf-8",s["default"].prototype.$axios.defaults.withCredentials=!0,new s["default"]({router:Z,render:t=>t(d)}).$mount("#app")}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s](n,n.exports,a),n.loaded=!0,n.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,i,n){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],i=t[c][1],n=t[c][2];for(var o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(c--,1);var d=i();void 0!==d&&(e=d)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,i,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,r=s[0],o=s[1],l=s[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var c=l(a)}for(e&&e(s);d<r.length;d++)n=r[d],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},s=self["webpackChunktr"]=self["webpackChunktr"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(4779)}));s=a.O(s)})();
//# sourceMappingURL=app.3c52633c.js.map